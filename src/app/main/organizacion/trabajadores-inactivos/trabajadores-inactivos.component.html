<div class="flex flex-col h-full">
  <div class="flex flex-col justify-center gap-4 px-6 py-4">
    <div class="flex justify-between items-center gap-4">
      <title-card [title]="title" [icon]="icon" />
    </div>
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        <p-inputgroup>
          <input pInputText [(ngModel)]="searchText" placeholder="Buscar" />
          <p-inputgroup-addon>
            <p-button
              icon="pi pi-search"
              severity="info"
              variant="text"
              size="small"
              (click)="search()"
              [disabled]="!searchText"
              pTooltip="Buscar"
              tooltipPosition="top"
              tooltipStyleClass="!text-xs !font-normal !p-0"
            />
          </p-inputgroup-addon>
        </p-inputgroup>
      </div>
      <div class="flex items-center gap-3">
        <!-- <p-button severity="info" size="small">
          <div class="flex justify-center items-center font-medium gap-1">
            <i
              class="iconify icon text-lg"
              data-icon="material-symbols:download-rounded"
              data-inline="false"
            ></i>
            <div>XLS</div>
          </div>
        </p-button> -->
        <p-button severity="info" size="small" (click)="addNew()">
          <div class="flex justify-center items-center font-medium gap-1">
            <i
              class="iconify icon text-lg"
              data-icon="material-symbols:add-rounded"
              data-inline="false"
            ></i>
            <div>INACTIVAR TRABAJADOR</div>
          </div>
        </p-button>
      </div>
    </div>
  </div>
  <div class="flex flex-col h-[calc(100% - 8.5rem)] px-6">
    <p-table
      #dt1
      dataKey="id"
      [value]="dataTable"
      stripedRows
      [scrollable]="true"
      scrollHeight="720px"
      styleClass="w-full"
    >
      <ng-template #header>
        <tr>
          <th><div class="text-center text-xs uppercase">Doc ID</div></th>
          <th><div class="text-xs uppercase">Nombre</div></th>
          <th><div class="text-xs uppercase">Apellido</div></th>
          <th>
            <div class="text-center text-xs uppercase">
              Motivo de suspención
            </div>
          </th>
          <th>
            <div class="text-center text-xs uppercase">Nota</div>
          </th>
          <th>
            <div class="text-center text-xs uppercase">Fecha de suspención</div>
          </th>
          <th>
            <div class="text-center text-xs uppercase">Estado</div>
          </th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template #body let-item>
        <tr>
          <td class="!w-20">
            <div class="text-center text-sm">{{ item.identificacion }}</div>
          </td>
          <td>
            <div class="text-sm">{{ item.nombre }}</div>
          </td>
          <td>
            <div class="text-sm">{{ item.apellido }}</div>
          </td>
          <td>
            <div class="text-center text-sm">
              {{ (item.inactivaciones ?? [])[0]?.motivoSuspension }}
            </div>
          </td>
          <td>
            <div class="text-center text-sm">
              {{ (item.inactivaciones ?? [])[0]?.nota }}
            </div>
          </td>
          <td>
            <div class="text-center text-sm">
              {{
                (item.inactivaciones ?? [])[0]?.fechaSuspension
                  | date : "dd MMM yyyy"
                  | uppercase
              }}
            </div>
          </td>
          <td>
            <div class="flex justify-center items-center gap-2">
              <button-custom
                icon="streamline-ultimate:single-neutral-actions-check-2"
                tooltip="Reactivar trabajador"
                (click)="reactivate(item)"
              />
            </div>
          </td>
          <td>
            <div class="flex justify-center items-center gap-2">
              <button-edit (click)="edit(item.id)" />
            </div>
          </td>
        </tr>
      </ng-template>
      <ng-template #emptymessage>
        <tr>
          <td colspan="100">
            <div class="text-center text-sm font-extralight">
              No se encontraron registros.
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
