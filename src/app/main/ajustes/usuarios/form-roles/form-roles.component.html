<div *ngIf="tipo == 'form'" class="flex flex-col gap-4">
  <div class="flex justify-start">
    <p-button severity="info" size="small" (click)="cancelar()">
      <div class="flex justify-center items-center font-medium gap-1">
        <iconify-icon [icon]="'material-symbols:chevron-left-rounded'" class="text-lg" />
        <span>Volver</span>
      </div>
    </p-button>
  </div>
  <form [formGroup]="formData" class="grid grid-cols-1 gap-6">
    <div class="grid grid-cols-3 gap-4">
      <div class="col-span-2 flex flex-col gap-2">
        <label class="text-sm font-medium" for="nombreCargo">
          Nombre <span class="text-xs">*</span>
        </label>
        <input id="nombreCargo" pInputText formControlName="nombre" />
      </div>
      <div class="flex flex-col gap-2">
        <label class="text-sm font-medium" for="nombreCargo">
          CÃ³digo <span class="text-xs">*</span>
        </label>
        <input id="nombreCargo" pInputText formControlName="codigo" />
      </div>
    </div>

    <div class="flex justify-between gap-4">
      <div class="flex items-center gap-2 py-1">
        <p-toggleswitch formControlName="isActive" />
        <label class="text-sm font-medium pb-1.5" for="nombreCargo">{{
          isActive ? "Activo" : "Inactivo"
        }}</label>
      </div>
      <p-button
        severity="info"
        size="small"
        [label]="id ? 'Actualizar' : 'Guardar'"
        [disabled]="formData.invalid"
        (onClick)="guardar()"
      />
    </div>
  </form>
</div>

<div *ngIf="tipo == 'table'" class="flex flex-col gap-4">
  <div class="flex justify-end">
    <p-button severity="info" size="small" (click)="addNew()">
      <div class="flex justify-center items-center font-medium gap-1">
        <iconify-icon [icon]="'uil:plus'" class="text-lg" />
        <span>Agregar</span>
      </div>
    </p-button>
  </div>

  <p-table
    #dt
    dataKey="id"
    [value]="listaRoles"
    [columns]="cols"
    [exportHeader]="'customExportHeader'"
    stripedRows
    [scrollable]="true"
    scrollHeight="720px"
    styleClass="w-full"
    [globalFilterFields]="['nombre']"
    exportFilename="cargos"
  >
    <ng-template #header let-columns>
      <tr>
        <th
          *ngFor="let col of columns"
          [ngClass]="[col.widthClass ? col.widthClass : '']"
        >
          <div
            [ngClass]="[
              'text-xs uppercase',
              col.align ? 'text-' + col.align : 'text-start'
            ]"
          >
            {{ col.header }}
          </div>
        </th>
      </tr>
    </ng-template>
    <ng-template #body let-item>
      <tr>
        <td>
          <div class="text-center text-sm">{{ item.orden }}</div>
        </td>
        <td>
          <div class="text-start text-sm capitalize">{{ item.nombre }}</div>
        </td>
        <td>
          <div class="text-center text-sm lowercase">{{ item.codigo }}</div>
        </td>
        <td>
          <div class="flex justify-center items-center text-sm capitalize">
            <p-tag
              [value]="item.isActive ? 'Activo' : 'Inactivo'"
              [severity]="item.isActive ? 'success' : 'warn'"
              styleClass="uppercase !font-bold !text-xs cursor-pointer"
              pTooltip="Cambiar estado"
              tooltipPosition="top"
              tooltipStyleClass="!text-xs !font-normal !p-0"
              rounded
            />
          </div>
        </td>
        <td>
          <div class="flex justify-center items-center gap-1">
            <button-custom
              tooltip="Permisos"
              severity="info"
              icon="material-symbols:grid-view-outline-rounded"
              (click)="permisos(item.id)"
            />
            <button-edit (click)="editar(item)" />
            <button-delete (click)="remove(item)" />
          </div>
        </td>
      </tr>
    </ng-template>
    <ng-template #emptymessage>
      <ng-container *ngIf="loadingTable; else elseTemplate">
        @for (item of [].constructor(4); track $index) {
        <tr class="h-12">
          <td *ngFor="let col of cols; let even = even"><p-skeleton />></td>
        </tr>
        }
      </ng-container>
      <ng-template #elseTemplate>
        <tr>
          <td colspan="100">
            <div class="text-center text-sm font-extralight">
              No se encontraron registros.
            </div>
          </td>
        </tr>
      </ng-template>
    </ng-template>
  </p-table>
</div>
